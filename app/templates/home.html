{% extends "base.html" %}

{% block title %}Inicio{% endblock %}

{% block styles %}
<style>
    /* SECCIÓN HERO (Específico de Home) */
    .hero-section {
        height: 80vh;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        background-color: #333;
        /* Quitamos el 'padding-top' de aquí, ya lo maneja el body en base.html */
    }
    #hero-background-slider { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
    .hero-slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0; transition: opacity 1.5s ease-in-out; }
    .hero-slide.active { opacity: 1; }
    .hero-content { position: relative; z-index: 2; color: #fff; text-shadow: 2px 2px 8px rgba(0,0,0,0.8); max-width: 800px; padding: 0 20px; animation: fadeIn 1.2s ease-in-out; }
    .hero-title { font-size: 3rem; font-weight: 900; text-transform: uppercase; margin-bottom: 15px; line-height: 1.1; }
    .hero-sub { font-weight: 500; font-size: 1.1rem; }

    /* ESTILOS DE SECCIÓN DE EVENTOS (Específico de Home) */
    .events-section {
        padding: 60px 0;
        position: relative;
        overflow: hidden;
    }
    #section-bg-image {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: 0;
        background-size: cover;
        background-position: center;
        opacity: 0;
        transition: opacity 0.7s ease-in-out;
    }
    #section-bg-image::before {
        content: '';
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background-color: rgba(255, 255, 255, 0.92);
        z-index: 1;
        opacity: 0; /* Lo quité, revisa si necesitas este velo */
        transition: opacity 0.3s ease;
    }
    .events-section > .container {
        position: relative;
        z-index: 2;
    }
    .section-title {
        font-weight: 900;
        font-size: 2.5rem;
        color: #222;
        margin-bottom: 10px;
    }
    .section-subtitle {
        font-size: 1.1rem;
        color: #555;
        margin-bottom: 50px;
    }
    .event-card {
        background-color: #fff;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease-in-out;
    }
    .event-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }
    .event-card-image img { width: 100%; height: 250px; object-fit: cover; }
    .event-card-content { padding: 20px; }
    .event-card-content h5 { font-weight: 700; color: #222; font-size: 1.4rem; }
    .event-card-content .price { font-size: 1.1rem; font-weight: 600; color: #444; margin-top: 5px; }
    .event-card-rating { display: flex; justify-content: space-between; align-items: center; margin-top: 15px; border-top: 1px solid #eee; padding-top: 15px; }
    .rating-stats { font-size: 0.8rem; color: #666; line-height: 1.4; }
    .rating-stats strong { font-size: 0.9rem; color: #111; }
    .rating-stars { color: #FFC107; font-size: 1.1rem; }
</style>
{% endblock %}

{% block content %}
    <div class="hero-section">
        <div id="hero-background-slider">
            <div class="hero-slide"></div>
            <div class="hero-slide"></div>
        </div>
        <div class="hero-content">
            {% if session['user_email'] %}
                <p>¡Hola, {{ session['user_email'].split('@')[0] }}!</p>
            {% endif %}
            <h1 class="hero-title">Descubre las mejores ofertas para ti</h1>
            <p class="hero-sub">Basadas en tu actividad reciente en Greenway</p>
        </div>
    </div>

    <section class="events-section">
        <div id="section-bg-image"></div> 
        <div class="container">
            <div class="row text-center">
                <div class="col-12">
                    <h2 class="section-title">LOS MEJORES EVENTOS A TU DISPOSICION</h2>
                    <p class="section-subtitle">Vive las mejores experiencias en eventos únicos cerca de tu ubicación de preferencia</p>
                </div>
            </div>

            <div class="row justify-content-center">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="event-card">
                        <div class="event-card-image">
                            <img src="https://www.minambiente.gov.co/wp-content/uploads/2021/10/noticia-2016-Con-ecoturismo-comunitario-Colombia-renueva-su-oferta-para-vacaciones-scaled.jpg" alt="Evento 1">
                        </div>
                        <div class="event-card-content">
                            <h5>Parque Nacional del Cocóra</h5>
                            <p class="price">Desde 449.990 $ por persona</p>
                            <div class="event-card-rating">
                                <div class="rating-stats">
                                    Puntaje &nbsp; • &nbsp; Reseñas<br>
                                    <strong>4.12</strong> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>1500</strong>
                                </div>
                                <div class="rating-stars">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star"></i> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="event-card">
                        <div class="event-card-image">
                            <img src="https://radionacional-v3.s3.amazonaws.com/s3fs-public/node/article/field_image/ciudad%20perdida%202.jpg" alt="Evento 2">
                        </div>
                        <div class="event-card-content">
                            <h5>Sierra Nevada de Santa Marta</h5>
                            <p class="price">Desde 999.999 $ por persona</p>
                            <div class="event-card-rating">
                                <div class="rating-stats">
                                    Puntaje &nbsp; • &nbsp; Reseñas<br>
                                    <strong>4.89</strong> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>1578</strong>
                                </div>
                                <div class="rating-stars">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-half"></i> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="event-card">
                        <div class="event-card-image">
                            <img src="https://res.cloudinary.com/worldpackers/image/upload/c_limit,f_auto,q_auto,w_1140/nhci0jfck8tf9ks8icyt" alt="Evento 3">
                        </div>
                        <div class="event-card-content">
                            <h5>Reserva Natural La Ceja</h5>
                            <p class="price">Desde 123.456 $ por persona</p>
                            <div class="event-card-rating">
                                <div class="rating-stats">
                                    Puntaje &nbsp; • &nbsp; Reseñas<br>
                                    <strong>3.5</strong> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>1500</strong>
                                </div>
                                <div class="rating-stars">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-half"></i>
                                    <i class="bi bi-star"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div> 
        </div> 
    </section>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // --- SCRIPT DEL SLIDER DEL HERO ---
        const heroImages = [
            'https://visitarmedellin.com/wp-content/uploads/2023/06/bubble-sky-glamping.jpg',
            'https://wallpapercave.com/wp/wp13667471.jpg',
            'https://storage.googleapis.com/jm-gcp-bethestory-p-12po-bucket/uploads/colombia-biodiversity.jpg',
            'https://hotelescheveres.com/wp-content/uploads/2025/01/hoteles-en-san-andres-frente-al-mar-scaled.jpg',
            'https://www.constructorapoporo.com/wp-content/uploads/2020/10/Invertir-en-el-eje-1536x864.jpg',
            'https://content.r9cdn.net/rimg/dimg/7b/90/91d28f06-city-52322-1694f3c3799.jpg?width=1366&height=768&xhint=1416&yhint=1122&crop=true'
        ]; 

        const slides = document.querySelectorAll('.hero-slide');
        let currentSlide = 0;
        let imageIndex = 0;

        function changeHeroBackground() {
            imageIndex = (imageIndex + 1) % heroImages.length;
            const nextSlide = (currentSlide + 1) % slides.length;

            slides[nextSlide].style.backgroundImage = `url('${heroImages[imageIndex]}')`;
            slides[nextSlide].classList.add('active');
            slides[currentSlide].classList.remove('active');
            currentSlide = nextSlide;
        }

        if (slides.length > 0) {
            slides[0].style.backgroundImage = `url('${heroImages[0]}')`;
            slides[0].classList.add('active');
            setInterval(changeHeroBackground, 6000);
        }

        // --- SCRIPT PARA FONDO INTERACTIVO DE EVENTOS ---
        const sectionBg = document.getElementById('section-bg-image');
        const eventCards = document.querySelectorAll('.event-card');

        eventCards.forEach(card => {
            const img = card.querySelector('.event-card-image img');
            const imageUrl = img.getAttribute('src');

            card.addEventListener('mouseenter', () => {
                sectionBg.style.backgroundImage = `url(${imageUrl})`;
                sectionBg.style.opacity = 1;
            });

            card.addEventListener('mouseleave', () => {
                sectionBg.style.opacity = 0;
            });
        });

    }); // Fin del DOMContentLoaded
</script>
{% endblock %}